<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="A system to increase the efficiency of dynamic web-scraping with RSelenium
    by leveraging parallel processing. You provide a function wrapper for your RSelenium 
    scraping routine with a set of inputs, and parsel runs it in several browser instances. 
    Chunked input processing as well as error catching and logging ensures seamless 
    execution and minimal data loss, even when unforeseen RSelenium errors occur. You can additionally 
    build safe scraping functions with minimal coding by utilizing constructor functions that act as wrappers 
    around RSelenium methods. ">
<title>Parallel Dynamic Web-Scraping Using RSelenium • parsel</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Parallel Dynamic Web-Scraping Using RSelenium">
<meta property="og:description" content="A system to increase the efficiency of dynamic web-scraping with RSelenium
    by leveraging parallel processing. You provide a function wrapper for your RSelenium 
    scraping routine with a set of inputs, and parsel runs it in several browser instances. 
    Chunked input processing as well as error catching and logging ensures seamless 
    execution and minimal data loss, even when unforeseen RSelenium errors occur. You can additionally 
    build safe scraping functions with minimal coding by utilizing constructor functions that act as wrappers 
    around RSelenium methods. ">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">parsel</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/till-tietz/parsel/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="parsel">parsel<a class="anchor" aria-label="anchor" href="#parsel"></a>
</h1></div>
<!-- badges: start -->

<p><code>parsel</code> is a framework for parallelized dynamic web-scraping using <code>RSelenium</code>. Leveraging parallel processing, it allows you to run any <code>RSelenium</code> web-scraping routine on multiple browser instances simultaneously, thus greatly increasing the efficiency of your scraping. <code>parsel</code> utilizes chunked input processing as well as error catching and logging, to ensure seamless execution of your scraping routine and minimal data loss, even in the presence of unforeseen <code>RSelenium</code> errors. <code>parsel</code> additionally provides convenient wrapper functions around <code>RSelenium</code> methods, that allow you to quickly generate safe scraping code with minimal coding on your end.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install parsel from CRAN</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"parsel"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Or the development version from GitHub:</span></span>
<span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"till-tietz/parsel"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="parallel-scraping">Parallel Scraping<a class="anchor" aria-label="anchor" href="#parallel-scraping"></a>
</h3>
<p>The following example will hopefully serve to illustrate the functionality and ideas behind how <code>parsel</code> operates. We’ll set up the following scraping job:</p>
<ol style="list-style-type: decimal">
<li>navigate to a random Wikipedia article</li>
<li>retrieve its title</li>
<li>navigate to the first linked page on the article</li>
<li>retrieve the linked page’s title and first section</li>
</ol>
<p>and parallelize it with <code>parsel</code>.</p>
<p><code>parsel</code> requires two things:</p>
<ol style="list-style-type: decimal">
<li>a scraping function defining the actions to be executed in each <code>RSelenium</code> instance. Actions to be executed in each browser instance should be written in the conventional <code>RSelenium</code> syntax with <code>remDr$</code> specifying the remote driver.<br>
</li>
<li>some input <code>x</code> to those actions (e.g. search terms to be entered in search boxes or links to navigate to etc.)</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/RSelenium/" class="external-link">RSelenium</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/till-tietz/parsel" class="external-link">parsel</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">#let's define our scraping function input </span></span>
<span><span class="co">#we want to run our function 4 times and we want it to start on the wikipedia main page each time </span></span>
<span><span class="va">input</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"https://de.wikipedia.org"</span>,<span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#let's define our scraping function </span></span>
<span></span>
<span><span class="va">get_wiki_text</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">input_i</span> <span class="op">&lt;-</span> <span class="va">x</span></span>
<span>  </span>
<span>  <span class="co">#navigate to input page (i.e wikipedia)</span></span>
<span>  <span class="va">remDr</span><span class="op">$</span><span class="fu">navigate</span><span class="op">(</span><span class="va">input_i</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co">#find and click random article </span></span>
<span>  <span class="va">rand_art</span> <span class="op">&lt;-</span> <span class="va">remDr</span><span class="op">$</span><span class="fu">findElement</span><span class="op">(</span>using <span class="op">=</span> <span class="st">"id"</span>, <span class="st">"n-randompage"</span><span class="op">)</span><span class="op">$</span><span class="fu">clickElement</span><span class="op">(</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co">#get random article title </span></span>
<span>  <span class="va">title</span> <span class="op">&lt;-</span> <span class="va">remDr</span><span class="op">$</span><span class="fu">findElement</span><span class="op">(</span>using <span class="op">=</span> <span class="st">"id"</span>, <span class="st">"firstHeading"</span><span class="op">)</span><span class="op">$</span><span class="fu">getElementText</span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span>  </span>
<span>  <span class="co">#check if there is a linked page</span></span>
<span>  <span class="va">link_exists</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="va">remDr</span><span class="op">$</span><span class="fu">findElement</span><span class="op">(</span>using <span class="op">=</span> <span class="st">"xpath"</span>, <span class="st">"/html/body/div[3]/div[3]/div[5]/div[1]/p[1]/a[1]"</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co">#if no linked page fill output with NA</span></span>
<span>  <span class="kw">if</span><span class="op">(</span><span class="fu">is</span><span class="op">(</span><span class="va">link_exists</span>,<span class="st">"try-error"</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="va">first_link_title</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span>    <span class="va">first_link_text</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span>    </span>
<span>    <span class="co">#if there is a linked page</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="co">#click on link</span></span>
<span>    <span class="va">link</span> <span class="op">&lt;-</span> <span class="va">remDr</span><span class="op">$</span><span class="fu">findElement</span><span class="op">(</span>using <span class="op">=</span> <span class="st">"xpath"</span>, <span class="st">"/html/body/div[3]/div[3]/div[5]/div[1]/p[1]/a[1]"</span><span class="op">)</span><span class="op">$</span><span class="fu">clickElement</span><span class="op">(</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co">#get link page title</span></span>
<span>    <span class="va">first_link_title</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="va">remDr</span><span class="op">$</span><span class="fu">findElement</span><span class="op">(</span>using <span class="op">=</span> <span class="st">"id"</span>, <span class="st">"firstHeading"</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="kw">if</span><span class="op">(</span><span class="fu">is</span><span class="op">(</span><span class="va">first_link_title</span>,<span class="st">"try-error"</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>      <span class="va">first_link_title</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span>    <span class="op">}</span><span class="kw">else</span><span class="op">{</span></span>
<span>      <span class="va">first_link_title</span> <span class="op">&lt;-</span> <span class="va">first_link_title</span><span class="op">$</span><span class="fu">getElementText</span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span>    <span class="op">}</span></span>
<span>    </span>
<span>    <span class="co">#get 1st section of link page</span></span>
<span>    <span class="va">first_link_text</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="va">remDr</span><span class="op">$</span><span class="fu">findElement</span><span class="op">(</span>using <span class="op">=</span> <span class="st">"xpath"</span>, <span class="st">"/html/body/div[3]/div[3]/div[5]/div[1]/p[1]"</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="kw">if</span><span class="op">(</span><span class="fu">is</span><span class="op">(</span><span class="va">first_link_text</span>,<span class="st">"try-error"</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>      <span class="va">first_link_text</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span>    <span class="op">}</span><span class="kw">else</span><span class="op">{</span></span>
<span>      <span class="va">first_link_text</span> <span class="op">&lt;-</span> <span class="va">first_link_text</span><span class="op">$</span><span class="fu">getElementText</span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">"random_article"</span> <span class="op">=</span> <span class="va">title</span>,</span>
<span>                    <span class="st">"first_link_title"</span> <span class="op">=</span> <span class="va">first_link_title</span>,</span>
<span>                    <span class="st">"first_link_text"</span> <span class="op">=</span> <span class="va">first_link_text</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Now that we have our scrape function and input we can parallelize the execution of the function. For speed and efficiency reasons, it is advisable to specify the headless browser option in the <code>extraCapabilities</code> argument. <code>parscrape</code> will show a progress bar, as well as elapsed and estimated remaining time so you can keep track of scraping progress.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wiki_text</span> <span class="op">&lt;-</span> <span class="fu">parsel</span><span class="fu">::</span><span class="fu"><a href="reference/parscrape.html">parscrape</a></span><span class="op">(</span>scrape_fun <span class="op">=</span> <span class="va">get_wiki_text</span>,</span>
<span>                               scrape_input <span class="op">=</span> <span class="va">input</span>,</span>
<span>                               cores <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                               packages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RSelenium"</span>,<span class="st">"XML"</span><span class="op">)</span>,</span>
<span>                               browser <span class="op">=</span> <span class="st">"firefox"</span>,</span>
<span>                               scrape_tries <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                               extraCapabilities <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                                     <span class="st">"moz:firefoxOptions"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'--headless'</span><span class="op">)</span><span class="op">)</span></span>
<span>                                     <span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><code>parscrape</code> returns a list with two elements:</p>
<ol style="list-style-type: decimal">
<li>a list of your scrape function output</li>
<li>a data.frame of inputs it was unable to scrape, and the associated error messages</li>
</ol>
</div>
<div class="section level3">
<h3 id="rselenium-constructors">RSelenium Constructors<a class="anchor" aria-label="anchor" href="#rselenium-constructors"></a>
</h3>
<p><code>parsel</code> allows you to generate safe scraping code with minimal hassle by simply composing <code>constructor</code> functions that effectively act as wrappers around <code>RSelenium</code> methods in a pipe. You can return a scraper function defined by <code>constructors</code> to the environment by starting your pipe with <code><a href="reference/start_scraper.html">start_scraper()</a></code> and ending it with <code><a href="reference/build_scraper.html">build_scraper()</a></code>. Alternatively you can dump the code generated by your <code>constructor</code> pipe to the console via <code><a href="reference/show.html">show()</a></code>. We’ll reproduce a slightly stripped down version of the <code>RSelenium</code> code in the above wikipedia scraping routine via the <code>parsel</code> <code>constructor</code> functions.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/till-tietz/parsel" class="external-link">parsel</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># returning a scaper function </span></span>
<span><span class="fu"><a href="reference/start_scraper.html">start_scraper</a></span><span class="op">(</span>args <span class="op">=</span> <span class="st">"x"</span>, name <span class="op">=</span> <span class="st">"get_wiki_text"</span><span class="op">)</span> <span class="op"><a href="reference/grapes-greater-than-greater-than-grapes.html">%&gt;&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/go.html">go</a></span><span class="op">(</span>url <span class="op">=</span> <span class="st">"x"</span><span class="op">)</span> <span class="op"><a href="reference/grapes-greater-than-greater-than-grapes.html">%&gt;&gt;%</a></span> </span>
<span>  <span class="fu"><a href="reference/click.html">click</a></span><span class="op">(</span>using <span class="op">=</span> <span class="st">"id"</span>, value <span class="op">=</span> <span class="st">"'n-randompage'"</span>, name <span class="op">=</span> <span class="st">"rand_art"</span><span class="op">)</span> <span class="op"><a href="reference/grapes-greater-than-greater-than-grapes.html">%&gt;&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/get_element.html">get_element</a></span><span class="op">(</span>using <span class="op">=</span> <span class="st">"id"</span>, value <span class="op">=</span> <span class="st">"'firstHeading'"</span>, name <span class="op">=</span> <span class="st">"title"</span><span class="op">)</span> <span class="op"><a href="reference/grapes-greater-than-greater-than-grapes.html">%&gt;&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/click.html">click</a></span><span class="op">(</span>using <span class="op">=</span> <span class="st">"xpath"</span>, value <span class="op">=</span> <span class="st">"'/html/body/div[3]/div[3]/div[5]/div[1]/p[1]/a[1]'"</span>, name <span class="op">=</span> <span class="st">"link"</span><span class="op">)</span> <span class="op"><a href="reference/grapes-greater-than-greater-than-grapes.html">%&gt;&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/get_element.html">get_element</a></span><span class="op">(</span>using <span class="op">=</span> <span class="st">"id"</span>, value <span class="op">=</span> <span class="st">"'firstHeading'"</span>, name <span class="op">=</span> <span class="st">"first_link_title"</span><span class="op">)</span> <span class="op"><a href="reference/grapes-greater-than-greater-than-grapes.html">%&gt;&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/get_element.html">get_element</a></span><span class="op">(</span>using <span class="op">=</span> <span class="st">"xpath"</span>, value <span class="op">=</span> <span class="st">"'/html/body/div[3]/div[3]/div[5]/div[1]/p[1]'"</span>, name <span class="op">=</span> <span class="st">"first_link_text"</span><span class="op">)</span> <span class="op"><a href="reference/grapes-greater-than-greater-than-grapes.html">%&gt;&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/build_scraper.html">build_scraper</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "scraping function get_wiki_text constructed and in environment"</span></span>
<span><span class="co">#&gt; [1] "scraping function get_wiki_text constructed and in environment"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/ls.html" class="external-link">ls</a></span><span class="op">(</span><span class="op">)</span>  </span>
<span><span class="co">#&gt; [1] "get_wiki_text"</span></span>
<span></span>
<span><span class="co"># dumping generated code to console </span></span>
<span><span class="fu"><a href="reference/go.html">go</a></span><span class="op">(</span>url <span class="op">=</span> <span class="st">"x"</span><span class="op">)</span> <span class="op"><a href="reference/grapes-greater-than-greater-than-grapes.html">%&gt;&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/click.html">click</a></span><span class="op">(</span>using <span class="op">=</span> <span class="st">"id"</span>, value <span class="op">=</span> <span class="st">"'n-randompage'"</span>, name <span class="op">=</span> <span class="st">"rand_art"</span><span class="op">)</span> <span class="op"><a href="reference/grapes-greater-than-greater-than-grapes.html">%&gt;&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/get_element.html">get_element</a></span><span class="op">(</span>using <span class="op">=</span> <span class="st">"id"</span>, value <span class="op">=</span> <span class="st">"'firstHeading'"</span>, name <span class="op">=</span> <span class="st">"title"</span><span class="op">)</span> <span class="op"><a href="reference/grapes-greater-than-greater-than-grapes.html">%&gt;&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/click.html">click</a></span><span class="op">(</span>using <span class="op">=</span> <span class="st">"xpath"</span>, value <span class="op">=</span> <span class="st">"'/html/body/div[3]/div[3]/div[5]/div[1]/p[1]/a[1]'"</span>, name <span class="op">=</span> <span class="st">"link"</span><span class="op">)</span> <span class="op"><a href="reference/grapes-greater-than-greater-than-grapes.html">%&gt;&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/get_element.html">get_element</a></span><span class="op">(</span>using <span class="op">=</span> <span class="st">"id"</span>, value <span class="op">=</span> <span class="st">"'firstHeading'"</span>, name <span class="op">=</span> <span class="st">"first_link_title"</span><span class="op">)</span> <span class="op"><a href="reference/grapes-greater-than-greater-than-grapes.html">%&gt;&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/get_element.html">get_element</a></span><span class="op">(</span>using <span class="op">=</span> <span class="st">"xpath"</span>, value <span class="op">=</span> <span class="st">"'/html/body/div[3]/div[3]/div[5]/div[1]/p[1]'"</span>, name <span class="op">=</span> <span class="st">"first_link_text"</span><span class="op">)</span> <span class="op"><a href="reference/grapes-greater-than-greater-than-grapes.html">%&gt;&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/show.html">show</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # navigate to url</span></span>
<span><span class="co">#&gt; not_loaded &lt;- TRUE</span></span>
<span><span class="co">#&gt; remDr$navigate(x)</span></span>
<span><span class="co">#&gt; while(not_loaded){</span></span>
<span><span class="co">#&gt; Sys.sleep(0.25)</span></span>
<span><span class="co">#&gt; current &lt;- remDr$getCurrentUrl()[[1]]</span></span>
<span><span class="co">#&gt; if(current == x){</span></span>
<span><span class="co">#&gt; not_loaded &lt;- FALSE</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; } </span></span>
<span><span class="co">#&gt;  </span></span>
<span><span class="co">#&gt;  rand_art &lt;- remDr$findElement(using = 'id', 'n-randompage')</span></span>
<span><span class="co">#&gt; rand_art$clickElement()</span></span>
<span><span class="co">#&gt; Sys.sleep(0.25) </span></span>
<span><span class="co">#&gt;  </span></span>
<span><span class="co">#&gt;  title &lt;- try(remDr$findElement(using = 'id', 'firstHeading')) </span></span>
<span><span class="co">#&gt; if(is(title,'try-error')){ </span></span>
<span><span class="co">#&gt; title &lt;- NA </span></span>
<span><span class="co">#&gt; } else { </span></span>
<span><span class="co">#&gt; title &lt;- title$getElementText()[[1]] </span></span>
<span><span class="co">#&gt; } </span></span>
<span><span class="co">#&gt;  </span></span>
<span><span class="co">#&gt;  link &lt;- remDr$findElement(using = 'xpath', '/html/body/div[3]/div[3]/div[5]/div[1]/p[1]/a[1]')</span></span>
<span><span class="co">#&gt; link$clickElement()</span></span>
<span><span class="co">#&gt; Sys.sleep(0.25) </span></span>
<span><span class="co">#&gt;  </span></span>
<span><span class="co">#&gt;  first_link_title &lt;- try(remDr$findElement(using = 'id', 'firstHeading')) </span></span>
<span><span class="co">#&gt; if(is(first_link_title,'try-error')){ </span></span>
<span><span class="co">#&gt; first_link_title &lt;- NA </span></span>
<span><span class="co">#&gt; } else { </span></span>
<span><span class="co">#&gt; first_link_title &lt;- first_link_title$getElementText()[[1]] </span></span>
<span><span class="co">#&gt; } </span></span>
<span><span class="co">#&gt;  </span></span>
<span><span class="co">#&gt;  first_link_text &lt;- try(remDr$findElement(using = 'xpath', '/html/body/div[3]/div[3]/div[5]/div[1]/p[1]')) </span></span>
<span><span class="co">#&gt; if(is(first_link_text,'try-error')){ </span></span>
<span><span class="co">#&gt; first_link_text &lt;- NA </span></span>
<span><span class="co">#&gt; } else { </span></span>
<span><span class="co">#&gt; first_link_text &lt;- first_link_text$getElementText()[[1]] </span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=parsel" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/till-tietz/parsel/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/till-tietz/parsel/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing parsel</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Till Tietz <br><small class="roles"> Maintainer, author </small> <a href="https://orcid.org/0000-0002-2916-9059" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=parsel" class="external-link"><img src="https://www.r-pkg.org/badges/version/parsel" alt="CRAN status"></a></li>
<li><a href="https://opensource.org/license/mit/" class="external-link"><img src="https://img.shields.io/badge/License-MIT-orange.svg" alt="License: MIT"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Till Tietz.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
